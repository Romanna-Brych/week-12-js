{"version":3,"file":"page-2.js","sources":["../src/js/page-2.js"],"sourcesContent":["import axios from 'axios';\n\n// Створи фільмотеку з популярними фільмами, для цього використай\n// https://developer.themoviedb.org/reference/trending-movies\n\n// Щоб отримати постер фільму потрібно підставити url з відповіді від бекенду та url з документації\n// https://developer.themoviedb.org/docs/image-basics\n\n// Відмалюй картки з фільмами\n// Приклад картки  => https://prnt.sc/Hi_iLLg7Nd1F\n\n// Реалізуй пагінацію\n// 1 Кнопка \"Load More\"\n\nconst BASE_URL = 'https://api.themoviedb.org/3';\nconst END_POINT = '/trending/movie/week';\n\nconst listEl = document.querySelector('.js-movie-list');\nconst loadBtnEl = document.querySelector('.js-load-more');\nlet page = 1;\n\nloadBtnEl.addEventListener('click', onLoadMore);\n\nasync function fetchMovie(page = 1) {\n  const { data } = await axios(`${BASE_URL}${END_POINT}`, {\n    headers: {\n      accept: 'application/json',\n      Authorization:\n        'Bearer eyJhbGciOiJIUzI1NiJ9.eyJhdWQiOiI0NzNkYTg1YjdiMTgwMTFkMDZmNDljMzVlMzJmNTBmYyIsIm5iZiI6MTc1ODgwNzcyNi44MzUsInN1YiI6IjY4ZDU0NmFlY2ZhMzk5YTdhMzg4NDY0ZCIsInNjb3BlcyI6WyJhcGlfcmVhZCJdLCJ2ZXJzaW9uIjoxfQ.HIH7WAO_7YA7uFw0JeN0tlufbUsG2iJbWO_w9tF8nU8',\n    },\n    params: {\n      page,\n    },\n  });\n\n  return data;\n}\n\nfetchMovie(page)\n  .then(response => {\n    console.log(response);\n    listEl.insertAdjacentHTML('beforeend', createMarkup(response.results));\n    if (response.page < response.total_pages) {\n      loadBtnEl.classList.replace('load-more-hidden', 'load-more');\n    }\n  })\n  .catch(error => {\n    alert(error.message);\n  });\n\nfunction createMarkup(arr) {\n  return arr\n    .map(\n      ({ poster_path, release_date, original_title, vote_average }) => `\n    <li class=\"movie-card\">\n    <img src=\"https://image.tmdb.org/t/p/w300${poster_path}\" alt=\"${original_title}\"/>\n    <div class=\"movie-info\">\n    <h2${original_title}h2>\n    <p>Release date: ${release_date}</p>\n    <p>Vote average: ${vote_average}</p>\n    </div>\n    </li>`\n    )\n    .join('');\n}\n\nasync function onLoadMore() {\n  page += 1;\n  loadBtnEl.disabled = true;\n  try {\n    const data = await fetchMovie(page);\n    listEl.insertAdjacentHTML('beforeend', createMarkup(data.results));\n    if (data.page >= data.total_pages) {\n      loadBtnEl.classList.replace('load-more', 'load-more-hidden');\n    }\n  } catch (error) {\n    alert(error.message);\n  } finally {\n    loadBtnEl.disabled = false;\n  }\n}\n"],"names":["BASE_URL","END_POINT","listEl","loadBtnEl","page","onLoadMore","fetchMovie","data","axios","response","createMarkup","error","arr","poster_path","release_date","original_title","vote_average"],"mappings":"oFAcA,MAAMA,EAAW,+BACXC,EAAY,uBAEZC,EAAS,SAAS,cAAc,gBAAgB,EAChDC,EAAY,SAAS,cAAc,eAAe,EACxD,IAAIC,EAAO,EAEXD,EAAU,iBAAiB,QAASE,CAAU,EAE9C,eAAeC,EAAWF,EAAO,EAAG,CAClC,KAAM,CAAE,KAAAG,CAAM,EAAG,MAAMC,EAAM,GAAGR,CAAQ,GAAGC,CAAS,GAAI,CACtD,QAAS,CACP,OAAQ,mBACR,cACE,wPACH,EACD,OAAQ,CACN,KAAAG,CACD,CACL,CAAG,EAED,OAAOG,CACT,CAEAD,EAAWF,CAAI,EACZ,KAAKK,GAAY,CAChB,QAAQ,IAAIA,CAAQ,EACpBP,EAAO,mBAAmB,YAAaQ,EAAaD,EAAS,OAAO,CAAC,EACjEA,EAAS,KAAOA,EAAS,aAC3BN,EAAU,UAAU,QAAQ,mBAAoB,WAAW,CAEjE,CAAG,EACA,MAAMQ,GAAS,CACd,MAAMA,EAAM,OAAO,CACvB,CAAG,EAEH,SAASD,EAAaE,EAAK,CACzB,OAAOA,EACJ,IACC,CAAC,CAAE,YAAAC,EAAa,aAAAC,EAAc,eAAAC,EAAgB,aAAAC,CAAc,IAAK;AAAA;AAAA,+CAExBH,CAAW,UAAUE,CAAc;AAAA;AAAA,SAEzEA,CAAc;AAAA,uBACAD,CAAY;AAAA,uBACZE,CAAY;AAAA;AAAA,UAG9B,EACA,KAAK,EAAE,CACZ,CAEA,eAAeX,GAAa,CAC1BD,GAAQ,EACRD,EAAU,SAAW,GACrB,GAAI,CACF,MAAMI,EAAO,MAAMD,EAAWF,CAAI,EAClCF,EAAO,mBAAmB,YAAaQ,EAAaH,EAAK,OAAO,CAAC,EAC7DA,EAAK,MAAQA,EAAK,aACpBJ,EAAU,UAAU,QAAQ,YAAa,kBAAkB,CAE9D,OAAQQ,EAAO,CACd,MAAMA,EAAM,OAAO,CACvB,QAAY,CACRR,EAAU,SAAW,EACtB,CACH"}